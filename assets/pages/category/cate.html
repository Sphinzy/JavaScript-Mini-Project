<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- css  -->
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/theme.css">
    <!-- icon  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- font  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <!-- boostrap  -->
    <link rel="stylesheet" href="../../bootstrap-5.3.7/css/bootstrap.css">

</head>
<style>
    table, th {
    border: 1px solid rgb(219, 219, 219);
    border-collapse: collapse;
    border-left: none;
    border-right: none;
    }
    th,
    td {
        padding: 10px;
    }
    .iconTable{
        text-align: end;
    }
    tr:nth-child(even) {
        background-color: var(--bs-sub-main);
    }
</style>
<body>

        <header class="sticky-top z-3">
            <nav class="navbar fixed-top bg-secondary-subtle">
                <div class="container">
                    <a class="navbar-brand fs-5 fw-bold text-main" href="#">BlogFy</a>
        
                    <!-- menu icon  -->
                    <button class="navbar-toggler d-flex d-lg-none" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
        
                    <!-- side bar  -->
                    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                        aria-labelledby="offcanvasNavbarLabel">
                        <div class="offcanvas-header">
                            <h5 class="offcanvas-title fs-5 fw-bold text-main" id="offcanvasNavbarLabel">BlogFy</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                        </div>
                        <div class="offcanvas-body">
                            <form class="d-flex my-3" role="search">
                                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" />
                                <button class="btn btn-outline-main" type="submit">Search</button>
                            </form>
                            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                                <li class="nav-item ps-3 rounded-2">
                                    <a href="../homepage/home.html" class="nav-link fs-5 p-2"><i
                                            class="bi bi-house-door pe-2"></i>Home</a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="../" class="nav-link fs-5 text-main p-2"><i
                                            class="bi bi-credit-card-2-back-fill pe-2"></i>Feed</a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="../profile/account.html" class="nav-link fs-5 text-main p-2"><i
                                            class="bi bi-person-circle pe-2"></i>Profile</a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="../Own Articles/getown.html" class="nav-link fs-5 text-main p-2"><i
                                            class="bi bi-patch-plus pe-2"></i>Create</a>
                                </li>
                                <li class="nav-item ps-3">
                                    <a href="../category/cate.html" class="nav-link active fs-5 text-main p-2"><i
                                            class="bi bi-copy pe-2"></i>Category</a>
                                </li>
                            </ul>
        
                        </div>
                    </div>
        
                    <!-- input search  -->
                    <div class="d-none d-lg-flex">
                        <input type="text" name="" id="" class="form-control" style="width: 500px;" placeholder="Search...">
                    </div>
        
                    <div class="dropdown d-none d-lg-flex">
                        <a class="nav-link px-3" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <div style="border: 2px solid #7645bf; border-radius: 50%; ">
                                <img src="" class="img-fluid rounded-circle object-fit-cover" id="profile-image"
                                    style="width: 40px; height: 40px;" alt />
                            </div>
                        </a>
        
                        <ul class="dropdown-menu border-0 shadow-sm bg-body-theme">
                            <li><a class='dropdown-item' href='../profile/account.html'><i
                                        class="bi bi-person-circle me-2"></i>Profile</a>
                            </li>
                            <li><a class="dropdown-item" href="" data-bs-toggle="modal" data-bs-target="#logoutModal"><i
                                        class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                        </ul>
                    </div>
        
                </div>
            </nav>
        </header>
        <!-- Logout Modal -->
        <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
        
                    <div class="modal-body">
                        <h3 class="text-danger">Logout</h3>
                        <p>Are you sure you want to logout?</p>
                        <div class="text-end">
                            <button type="button" class="btn btn-outline-main" data-bs-dismiss="modal">No</button>
                            <!-- ផ្លាស់ប្តូរ href ទៅ script logout របស់អ្នក -->
                            <button type="button" class="btn btn-danger" id="btnLogout">Yes</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <main>

        <!-- modal  -->
        <section class="modalSet">
            <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-dialog-centered">
                    <div class="modal-content">
                        <!-- <div class="modal-header">
                            <h3 class="modal-title text-main" id="deleteModalLabel">Delete Category</h3>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div> -->
                        <div class="modal-body">
                            <h3 class="modal-title text-main" id="delModalLabel" >Do you want to delete</h3>
                        </div>
                        <div class="modal-footer d-flex justify-content-evenly">
                            <button type="button" class="btn btn-secondary" style="width:30%" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-danger" style="width:30%" id="btnDeleteCate"  onclick="btnDeleteCate()">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Modal-create -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title text-main" id="exampleModalLabel">Create Category</h3>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>Create a category</p>
                            <input type="text" class="form-control" id="cateInp">
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-main btnCreateCate w-100" onclick="btnCreateCate()">Create</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- modal save  -->
            <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title text-main" id="editModalLabel">Edit Category</h3>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>Edit category</p>
                            <input type="text" class="form-control" id="editInp">
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-main w-100" id="btnSaveCate">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mt-15">
            <div class="container">
                <div class="row">
                    <!-- Left Sidebar -->
                    <div class="col-lg-3 d-none d-lg-block">
                        <div class="position-sticky shadow-sm rounded-3" style="top: 100px;">
                            <ul class="navbar-nav text-start">
                                <li class="nav-item rounded-2"> <a href="../homepage/home.html" class="nav-link fs-5 p-2"><i
                                            class="bi bi-house-door pe-2"></i>Home</a> </li>
                                <li class="nav-item"> <a href="../" class="nav-link fs-5 text-main p-2"><i
                                            class="bi bi-credit-card-2-back-fill pe-2"></i>Feed</a> </li>
                                <li class="nav-item"> <a href="../profile/account.html" class="nav-link fs-5 text-main p-2"><i
                                            class="bi bi-person-circle pe-2"></i>Profile</a> </li>
                                <li class="nav-item"> <a href="../Own Articles/getown.html" class="nav-link fs-5 text-main p-2"><i
                                            class="bi bi-patch-plus pe-2"></i>Create</a> </li>
                                <li class="nav-item"> <a href="../category/cate.html" class="nav-link active fs-5 text-main p-2"><i
                                            class="bi bi-copy pe-2"></i>Category</a> </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-lg-9">
                        <div class="mb-5">
                            <input type="text" name="" id="pageSearch" class="border-1 p-1 shadow-lg rounded-2">
                            <button class="btn btn-main"  data-bs-toggle="modal" data-bs-target="#exampleModal">Create</button>
                        </div>
                        
                        <div class="row">
                            <div class="col-12">
                                <table class="w-100">
                                    <thead>
                                        <tr>
                                            <th>Category</th>
                                            <th class="text-end">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbody">
                        
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-12">
                                <div class="d-flex justify-content-between mt-5">
                                    <span>Pages <span id="pages"></span></span>
                                    <div id="pagination">
                                    </div>
                                </div>
                                
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </section>




    </main>


    <script src="../../JS/cate.js"></script>
    <script src="../../bootstrap-5.3.7/js/bootstrap.bundle.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> -->
    <script>
        const token = localStorage.getItem('token');
        const baseUrl = 'http://blogs.csm.linkpc.net/api/v1';
        const imageLink = localStorage.getItem('getImage');
        const getImage = document.querySelector('#profile-image');
        const btnLogout = document.querySelector('#btnLogout');
        btnLogout.addEventListener('click', () => {
            fetch(baseUrl + "/auth/logout", {
                method: 'DELETE',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
                .then(res => res.json())
                .then(resData => {
                    localStorage.removeItem('token');
                    return location.href = '../login/login.html'
                    console.log(resData);

                })
        })
        //getImage.setAttribute('src', imageLink);
        getImage.src = imageLink;
    </script>
    <script src="../../bootstrap-5.3.7/js/bootstrap.bundle.min.js"></script>

</body>

</html>