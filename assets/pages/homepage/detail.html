<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blogify | Article Detail</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="../../bootstrap-5.3.7/css/bootstrap.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/theme.css">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
</head>

<body>

<header class="sticky-top z-3">
  <nav class="navbar fixed-top bg-secondary-subtle">
    <div class="container">
      <div>
        <img src="../../img/logo-team.png" id="logoImage" alt="">
        <a class="navbar-brand fs-5 fw-bold text-main" href="../homepage/home.html">BlogFy</a>
      </div>

      <!-- menu icon  -->
      <button class="navbar-toggler d-flex d-lg-none" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- side bar  -->
      <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header">
          <div>
            <img src="../../img/logo-team.png" id="logoImage" alt="">
            <a class="navbar-brand fs-5 fw-bold text-main" href="../homepage/home.html">BlogFy</a>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <form class="d-flex my-3" role="search">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" />
            <button class="btn btn-outline-main" type="submit">Search</button>
          </form>
          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <li class="nav-item ps-3 rounded-2">
              <a href="../homepage/home.html" class="nav-link fs-5 p-2"><i class="bi bi-house-door pe-2"></i>Home</a>
            </li>
            <li class="nav-item ps-3">
              <a href="../" class="nav-link fs-5 text-main p-2"><i
                  class="bi bi-credit-card-2-back-fill pe-2"></i>Feed</a>
            </li>
            <li class="nav-item ps-3">
              <a href="../homepage/follow.html" class="nav-link fs-5 text-main p-2"><i
                  class="bi bi-credit-card-2-back-fill pe-2"></i>Following</a>
            </li>
            <li class="nav-item ps-3">
              <a href="../Own Articles/getown.html" class="nav-link fs-5 text-main p-2"><i
                  class="bi bi-patch-plus pe-2"></i>Create</a>
            </li>
            <li class="nav-item ps-3">
              <a href="../category/cate.html" class="nav-link active fs-5 text-main p-2"><i
                  class="bi bi-copy pe-2"></i>Category</a>
            </li>
          </ul>
        </div>
      </div>

      <!-- input search  -->
      <div class="d-none d-lg-flex">
        <input type="text" class="form-control" style="width: 500px;" placeholder="Search...">
      </div>

      <div class="dropdown d-none d-lg-flex">
        <a class="nav-link px-3" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <div style="border: 2px solid #9f28e3; border-radius: 50%; ">
            <img src="" class="img-fluid rounded-circle object-fit-cover" id="profile-image"
              style="width: 40px; height: 40px; padding: 3px" alt />
          </div>
        </a>

        <ul class="dropdown-menu border-0 shadow-sm bg-body-theme">
          <li><a class='dropdown-item' href='../profile/account.html'><i
                class="bi bi-person-circle me-2"></i>Profile</a>
          </li>
          <li><a class="dropdown-item" href="" data-bs-toggle="modal" data-bs-target="#logoutModal"><i
                class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
        </ul>
      </div>

    </div>
  </nav>
</header>

<!-- Logout Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-body">
        <h3 class="text-danger">Logout</h3>
        <p>Are you sure you want to logout?</p>
        <div class="text-end">
          <button type="button" class="btn btn-outline-main" data-bs-dismiss="modal">No</button>
          <button type="button" class="btn btn-danger" id="btnLogout">Yes</button>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- ================= MAIN ================= -->
  <main class="pt-5 mt-4">
    <section>
      <div class="container">
        <div class="row">

          <!-- Left Sidebar -->
          <div class="col-lg-3 d-none d-lg-block">
            <div class="position-sticky shadow-sm rounded-2" style="top: 100px;">
              <ul class="navbar-nav text-start">
                <li class="nav-item rounded-2"><a href="../homepage/home.html" class="nav-link active fs-5 p-2"><i
                      class="bi bi-house-door pe-2"></i>Home</a></li>
                <li class="nav-item"> <a href="../homepage/follow.html" class="nav-link fs-5 text-main p-2"><i
                                            class="bi bi-person-lines-fill pe-2"></i>Following</a> </li>
                <li class="nav-item"><a href="../profile/account.html" class="nav-link fs-5 text-main p-2"><i
                      class="bi bi-person-circle pe-2"></i>Profile</a></li>
                <li class="nav-item"><a href="../Own Articles/getown.html" class="nav-link fs-5 text-main p-2"><i
                      class="bi bi-patch-plus pe-2"></i>Create</a></li>
                <li class="nav-item"><a href="../category/cate.html" class="nav-link fs-5 text-main p-2"><i
                      class="bi bi-copy pe-2"></i>Category</a></li>
              </ul>
            </div>
          </div>

          <!-- ARTICLE DETAIL -->
          <div class="col-md-12 col-lg-9 my-4">

            <a href="../homepage/home.html" class="btn btn-main mb-3">
              <i class="bi bi-arrow-left-short"></i> Back
            </a>

            <div id="article-detail" class="card shadow-sm">
              <!-- ARTICLE FROM API -->
            </div>

          </div>

        </div>
      </div>
    </section>
  </main>

  <!-- ================= SCRIPT ================= -->
  <!-- <script>
    const baseUrl = "http://blogs.csm.linkpc.net/api/v1";

    // Get article ID
    const params = new URLSearchParams(window.location.search);
    const articleId = params.get("id");
    const articleDiv = document.getElementById("article-detail");

    if (!articleId) {
      articleDiv.innerHTML = `
    <div class="card-body">
      <p class="text-danger">Article not found.</p>
    </div>`;
    } else {
      fetch(`${baseUrl}/articles/${articleId}`, {
        headers: {
          Authorization: "Bearer " + localStorage.getItem("token")
        }
      })
      .then(res => res.json())
      .then(resData => {
        const article = resData.data;
        const creatorObj = {
        id: article.creator?.id || null,
        firstName: article.creator?.firstName || "",
        lastName: article.creator?.lastName || "",
        avatar: article.creator?.avatar || "assets/default-avatar.png"
      };
      localStorage.setItem("profileUser", JSON.stringify(creatorObj));



      document.querySelector('.card-insert').innerHTML = `
  <div class="card-body">
    <div class="row g-4">

            <div class="col-12 col-lg-6">
              <img src="${article.thumbnail}"
                   class="img-fluid rounded w-100"
                   style="height:450px;object-fit:cover">
            </div>

            <div class="col-12 col-lg-6">

              <a href="UserProfile.html?id=${creator.id}"
                 class="d-flex align-items-center text-decoration-none text-dark mb-2">
                 <div style="border: 2px solid #9f28e3; border-radius: 50%; padding: 3px;">
                   <img src="${creator.avatar}"
                        class="rounded-circle"
                        width="50px" height="50px object-fit-cover">
                 </div>
                <div>
                  <strong>${creator.firstName} ${creator.lastName}</strong><br>
                  <small class="text-muted">
                    ${new Date(article.createdAt).toLocaleString()}
                  </small>
                </div>
              </a>

        <span class="badge bg-secondary mb-2">
          ${article.category?.name || "Uncategorized"}
        </span>

              <h3 class="mt-2 clamp-2">${article.title}</h3>

              <p class="mt-3 fs-5 clamp-7">
                ${article.content || article.description || ""}
              </p>

            </div>

          </div>
        </div>
      `;
        })
        .catch(err => {
          console.error(err);
          articleDiv.innerHTML = `
        <div class="card-body">
          <p class="text-danger">Failed to load article.</p>
        </div>`;
        });
    }
  </script> -->

  <script src="../../JS/detail.js"> </script>
  <!-- Bootstrap JS -->
  <script src="../../bootstrap-5.3.7/js/bootstrap.bundle.js"></script>
      <script src="../../JS/toast.js"></script>


</body>
</html>